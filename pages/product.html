<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Website</title>
    <link href="../css/product.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <link href="../css/main.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../image/icon/themify-icons/themify-icons.css">
</head>

<body>
  <div class="header">
    <div class="header__top">
        <div class="header__search">
          <input type="text" class="header__search-box" placeholder="Tìm kiếm..." name="" id="">
          <i class="header_search-icon ti-search"></i>
        </div>
        <div class="header__logo">
          <img src="/image/logo/NEU_logo.svg" alt="" class="header__brand-logo">
          <img src="/image/logo/gnc_logo.svg" alt="" class="header__brand-logo">
          <img src="/image/logo/fuwa3e-logo.svg" style="width: 9.5rem;" alt="" class="header__brand-logo">
        </div>
        <div class="header__navigation">
          <ul class="header__nav-list">
            <li class="header__nav-item">
              <a href="/index.html" class="header__nav-link">Trang chủ</a>
            </li>
            <li class="header__nav-item">
              <a href="/pages/products.html" class="header__nav-link">
                Sản phẩm/Dịch vụ
              </a>
            </li>
            <li class="header__nav-item">
              <a href="/pages/news.html" class="header__nav-link">  
                Tin tức
                <i class="ti-angle-double-down"></i>
              </a>
              <ul class="header__subnav">
                <li class="header_subnav-item">
                  <a href="" class="header__subnav-link">Thông tin</a>
                </li>
                <li class="header_subnav-item">
                  <a href="/pages/event.html" class="header__subnav-link">Sự kiện</a>
                </li>
              </ul>
            </li>
            <li class="header__nav-item">
              <a href="" class="header__nav-link">
                Hỗ trợ
                <i class="ti-angle-double-down"></i>
              </a>
              <ul class="header__subnav">
                <li class="header__subnav-item">
                  <a href="/pages/contact.html" class="header__subnav-link">Liên hệ</a>
                </li>
                <li class="header_subnav-item">
                  <a href="/pages/fag.html" class="header__subnav-link">FAQ</a>
                </li>
              </ul>
            </li>
            <li class="header__nav-item">
              <a href="/pages/recruitment.html" class="header__nav-link">Tuyển dụng</a>
            </li>
          </ul>
        </div>
        <div class="header__action-item">
          <a title="Đăng nhập" href="/pages/login.html" class="header__action-button">
            <i class="ti-user"></i>
          </a>
          <a title="Giỏ hàng" href="" class="header__action-button">               
              <i class="ti-shopping-cart"></i>
          </a>
        </div>
    </div>
  </div>
    <div class="product-detail" id="product-detail">Đang tải sản phẩm...</div>

    <script>
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function getStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                stars += i <= rating ? '★' : '☆';
            }
            return stars;
        }

        async function loadProduct() {
            const params = new URLSearchParams(location.search);
            const id = params.get("id");

            const res = await fetch("../json/products.json");
            const data = await res.json();
            const product = data.find(p => p.id == id);

            const box = document.getElementById("product-detail");

            if (!product) {
                box.innerHTML = "Không tìm thấy sản phẩm.";
                return;
            }

            const purchaseCount = getRandomInt(100, 1000);
            const rating = getRandomInt(1, 5);

            box.innerHTML = `
      <div class="product-top">
        <div class="product-img">
          <img src="${product.img}" alt="${product.name}">
        </div>
        <div class="product-info">
          <div class="product-name">${product.name}</div>
          <div class="product-price">${product.price}.000đ</div>
          <div class="product-meta">
            Đã bán: ${purchaseCount} | Đánh giá:
            <span class="stars">${getStars(rating)}</span>
          </div>
          <div class="product-buy"></div>
        </div>
      </div>
      <div class="product-desc">${product.desc}</div>
    `;
        }

        loadProduct();
    </script>
</body>

</html>